"use strict";function _interopDefault(t){return t&&"object"==typeof t&&"default"in t?t.default:t}var fa$1=_interopDefault(require("dayjs/locale/fa"));function _slicedToArray(t,r){return _arrayWithHoles(t)||_iterableToArrayLimit(t,r)||_nonIterableRest()}function _arrayWithHoles(t){if(Array.isArray(t))return t}function _iterableToArrayLimit(t,r){var n=[],i=!0,a=!1,e=void 0;try{for(var s,o=t[Symbol.iterator]();!(i=(s=o.next()).done)&&(n.push(s.value),!r||n.length!==r);i=!0);}catch(t){a=!0,e=t}finally{try{i||null==o.return||o.return()}finally{if(a)throw e}}return n}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function gregorianToJulian(t,r,n){r<=2&&(t-=1,r+=12);var i=Math.floor(t/100),a=2-i+Math.floor(i/4);return Math.floor(365.25*(t+4716))+Math.floor(30.6001*(r+1))+n+a-1524.5}function julianToPersian(t){t+=.5;var r=Math.floor(t),n=t-r,i=r;if(r>=2299161){var a=Math.floor((r-1867216.25)/36524.25);i=r+1+a-Math.floor(a/4)}var e=i+1524,s=Math.floor((e-122.1)/365.25),o=Math.floor(365.25*s),h=Math.floor((e-o)/30.6001),u=h<14?h-1:h-13;return gregorianToJalali(u>2?s-4716:s-4715,u,e-o-Math.floor(30.6001*h)+n)}function julianToGregorian(t){t+=.5;var r=Math.floor(t),n=t-r,i=r;if(r>=2299161){var a=Math.floor((r-1867216.25)/36524.25);i=r+1+a-Math.floor(a/4)}var e=i+1524,s=Math.floor((e-122.1)/365.25),o=Math.floor(365.25*s),h=Math.floor((e-o)/30.6001),u=e-o-Math.floor(30.6001*h)+n,f=h<14?h-1:h-13,l=f>2?s-4716:s-4715;return[Math.floor(l),Math.floor(f),Math.floor(u)]}function persianToJulian(t,r,n){var i=[31,28,31,30,31,30,31,31,30,31,30,31],a=[31,31,31,31,31,31,30,30,30,30,30,29];function e(t,r){return Math.floor(t/r)}for(var s=365*(t-=979)+8*e(t,33)+e(t%33+3,4),o=0;o<r-1;++o)s+=a[o];var h=(s+=n-1)+79,u=1600+400*e(h,146097),f=!0;for((h%=146097)>=36525&&(u+=100*e(--h,36524),(h%=36524)>=365?h++:f=!1),u+=4*e(h,1461),(h%=1461)>=366&&(f=!1,u+=e(--h,365),h%=365),o=0;h>=i[o]+(1==o&&f);o++)h-=i[o]+(1==o&&f);return gregorianToJulian(u,o+1,h+1)}function gregorianToJalali(t,r,n){var i=[31,28,31,30,31,30,31,31,30,31,30,31],a=[31,31,31,31,31,31,30,30,30,30,30,29];function e(t,r){return Math.floor(t/r)}for(var s=t-1600,o=r-1,h=n-1,u=365*s+e(s+3,4)-e(s+99,100)+e(s+399,400),f=0;f<o;++f)u+=i[f];o>1&&(t%4==0&&t%100!=0||t%400==0)&&u++;var l=(u+=h)-79,d=979+33*e(l,12053)+4*e(l%=12053,1461);(l%=1461)>=366&&(d+=e(l-1,365),l=(l-1)%365);for(var c=0;c<11&&l>=a[c];++c)l-=a[c];return[d,c+1,l+1]}var jdate={J:function(t,r,n){return julianToPersian(gregorianToJulian(t,r,n))},G:function(t,r,n){return julianToGregorian(persianToJulian(t,r,n))}},REGEX_PARSE=/^(\d{4})[-/]?(\d{1,2})[-/]?(\d{0,2})(.*)?$/,REGEX_FORMAT=/\[.*?\]|jY{2,4}|jM{1,4}|jD{1,2}|Y{2,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,DATE="date",D="day",M="month",Y="year",W="week",FORMAT_DEFAULT="YYYY-MM-DDTHH:mm:ssZ",fa={jmonths:"فروردین_اردیبهشت_خرداد_تیر_مرداد_شهریور_مهر_آبان_آذر_دی_بهمن_اسفند".split("_")},plugin=function(t,r,n){var i=r.prototype,a=i.$utils(),e=function(t){return"jalali"===t.$C},s=a.prettyUnit||a.p,o=a.isUndefined||a.u,h=a.padStart||a.s,u=a.monthDiff||a.m,f=a.absFloor||a.a,l=function(t){return function(){var r=t.bind(this).apply(void 0,arguments);return r.$C=this.$C,r.isJalali()&&r.InitJalali(),r}};i.startOf=l(i.startOf),i.endOf=l(i.endOf),i.add=l(i.add),i.subtract=l(i.subtract),i.set=l(i.set);var d=i.parse,c=i.init,$=i.startOf,j=i.$set,v=i.add,y=i.format,_=i.diff,b=i.year,g=i.month,T=i.date,p=i.daysInMonth,m=i.toArray;n.$C="gregory",n.$fdow=6,n.calendar=function(t){return n.$C=t,n},i.calendar=function(t){var r=this.clone();return r.$C=t,r.isJalali()&&r.InitJalali(),r},i.isJalali=function(){return e(this)},n.en.jmonths="Farvardin_Ordibehesht_Khordaad_Tir_Mordaad_Shahrivar_Mehr_Aabaan_Aazar_Dey_Bahman_Esfand".split("_"),n.locale("fa",Object.assign({},fa$1,{},fa),!0);var A=function(t,r){return n(t,{locale:r.$L,utc:r.$u,calendar:r.$C})};i.init=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};c.bind(this)(t),this.isJalali()&&this.InitJalali()},i.parse=function(t){var r;if(this.$C=t.calendar||this.$C||n.$C,t.jalali&&"string"==typeof t.date&&/.*[^Z]$/i.test(t.date)&&(r=t.date.match(REGEX_PARSE))){var i=_slicedToArray(jdate.G(parseInt(r[1],10),parseInt(r[2],10),parseInt(r[3]||1,10)),3),a=i[0],e=i[1],s=i[2];t.date="".concat(a,"-").concat(e,"-").concat(s).concat(r[4]||"")}return d.bind(this)(t)},i.InitJalali=function(){var t=_slicedToArray(jdate.J(this.$y,this.$M+1,this.$D),3),r=t[0],n=t[1],i=t[2];this.$jy=r,this.$jM=n-1,this.$jD=i},i.startOf=function(t,r){var i=this;if(!e(this))return $.bind(this)(t,r);var a=!!o(r)||r,h=s(t),u=function(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i.$jy,e=_slicedToArray(jdate.G(n,r+1,t),3),s=e[0],o=e[1],h=e[2],u=A(new Date(s,o-1,h),i);return(a?u:u.endOf(D)).$set("hour",1)},f=(this.$W+(7-n.$fdow))%7;switch(h){case Y:return a?u(1,0):u(0,0,this.$jy+1);case M:return a?u(1,this.$jM):u(0,(this.$jM+1)%12,this.$jy+parseInt((this.$jM+1)/12,10));case W:return u(a?this.$jD-f:this.$jD+(6-f),this.$jM);default:return $.bind(this)(t,r)}},i.$set=function(t,r){var n=this;if(!e(this))return j.bind(this)(t,r);var i=function(t,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:n.$jy,a=_slicedToArray(jdate.G(i,r+1,t),3),e=a[0],s=a[1],o=a[2];return n.$d.setFullYear(e),n.$d.setMonth(s-1),n.$d.setDate(o),n};switch(s(t)){case DATE:case D:i(r,this.$jM);break;case M:i(this.$jD,r);break;case Y:i(this.$jD,this.$jM,r);break;default:return j.bind(this)(t,r)}return this.init(),this},i.add=function(t,r){var n=this;if(!e(this))return v.bind(this)(t,r);t=Number(t);var i=!r||1!==r.length&&"ms"!==r?s(r):r;if(["M",M].indexOf(i)>-1){var a=this.$jM+t,o=a<0?-Math.ceil(-a/12):Math.floor(a/12),h=this.$jD,u=this.set(D,1).add(o,Y).set(M,a-12*o);return u.set(D,Math.min(u.daysInMonth(),h))}if(["y",Y].indexOf(i)>-1)return function(r,i){var a=n.set(DATE,1).set(r,i+t);return a.set(DATE,Math.min(n.$jD,a.daysInMonth()))}(Y,this.$jy);if(["d",D].indexOf(i)>-1){var f=new Date(this.$d);return f.setDate(f.getDate()+t),A(f,this)}if(["w",W].indexOf(i)>-1){var l=new Date(this.$d);return l.setDate(l.getDate()+7*t),A(l,this)}return v.bind(this)(t,r)},i.format=function(t,r){var n=this;if(!e(this))return y.bind(this)(t,r);var i=t||FORMAT_DEFAULT,a=(r||this.$locale()).jmonths;return i.replace(REGEX_FORMAT,function(t){if(t.indexOf("[")>-1)return t.replace(/\[|\]/g,"");switch(t){case"YY":return String(n.$jy).slice(-2);case"YYYY":return String(n.$jy);case"M":return String(n.$jM+1);case"MM":return h(n.$jM+1,2,"0");case"MMM":return a[n.$jM].slice(0,3);case"MMMM":return a[n.$jM];case"D":return String(n.$jD);case"DD":return h(n.$jD,2,"0");default:return y.bind(n)(t,r)}})},i.diff=function(t,r,i){if(!e(this))return _.bind(this)(t,r,i);var a=s(r),o=n(t),h=u(this,o);switch(a){case Y:h/=12;break;case M:break;default:return _.bind(this)(t,r,i)}return i?h:f(h)},i.$g=function(t,r,n){return o(t)?this[r]:this.set(n,t)},i.year=function(t){return e(this)?this.$g(t,"$jy",Y):b.bind(this)(t)},i.month=function(t){return e(this)?this.$g(t,"$jM",M):g.bind(this)(t)},i.date=function(t){return e(this)?this.$g(t,"$jD",D):T.bind(this)(t)},i.daysInMonth=function(){return e(this)?this.endOf(M).$jD:p.bind(this)()},m&&(i.toArray=function(){return e(this)?[this.$jy,this.$jM,this.$jD,this.$H,this.$m,this.$s,this.$ms]:m.bind(this)()}),i.clone=function(){return A(this.toDate(),this)}};module.exports=plugin;
